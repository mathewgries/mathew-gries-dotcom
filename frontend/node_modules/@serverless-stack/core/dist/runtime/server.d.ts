import * as Runner from "./runner";
declare type ServerOpts = {
    port: number;
};
declare type Payload = {
    event: any;
    context: any;
    deadline: number;
};
declare type InvokeOpts = {
    function: Runner.Opts;
    payload: Payload;
    env: Record<string, string>;
};
declare type ResponseSuccess = {
    type: "success";
    data: any;
};
declare type ResponseTimeout = {
    type: "timeout";
};
declare type ResponseFailure = {
    type: "failure";
    error: any;
};
declare type Response = ResponseSuccess | ResponseFailure | ResponseTimeout;
export declare class Server {
    private readonly fastify;
    private readonly pools;
    private readonly opts;
    constructor(opts: ServerOpts);
    listen(): void;
    private pool;
    private next;
    invoke(opts: InvokeOpts): Promise<unknown>;
    drain(opts: Runner.Opts): Promise<void>;
    private static generateFunctionID;
    response(fun: string, request: string, response: Response): void;
    private trigger;
}
export {};
